# .github/workflows/maven-test.yml

name: Maven Test

on:
  workflow_call:

jobs:
  maven-test:
    runs-on:  self-hosted

    steps:
      - name: Checkout code
        uses: actions/checkout@928458dc63c29045d18a90cead4b79dcd0a6e98b #v4.2.2

      - name: Set up JDK
        uses: actions/setup-java@7a6d8a8234af8eb26422e24e3006232cccaa061b #v4
        with:
          distribution: 'temurin'
          java-version-file: '.java-version'
          overwrite-settings: 'false'
          cache: 'maven'
          cache-dependency-path: 'pom.xml'

      - name: Maven test
        run: |
          set -o pipefail
          mvn -B -U -fae clean install | tee result.log | tail -n 25
            
